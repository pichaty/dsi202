{% extends 'myapp/base.html' %}
{% load static %}

{% block title %}‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ - PawPal{% endblock %}

{% block extra_head %}
<style>
    /* ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞ responsive */
    .donations-page-container { /* ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ class ‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö page container */
        max-width: 800px;
        margin: 25px auto;
        padding: 20px;
    }

    .page-section-header { /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ) */
        background-color: #b56f39; /* ‡∏™‡∏µ‡∏™‡πâ‡∏° */
        color: white;
        padding: 18px 25px;
        border-radius: var(--border-radius-lg, 16px) var(--border-radius-lg, 16px) 0 0;
        text-align: center;
        font-size: 1.7em;
        font-weight: bold;
        font-family: 'Grandstander', cursive;
        margin-bottom: 0;
        letter-spacing: 0.5px;
    }
     .page-section-header .paw-icon-header {
        margin-right: 12px;
        font-size: 1.1em;
        vertical-align: middle;
        
        
    }

    .donations-content-box { /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å */
        background-color: var(--card-bg, #ffffff);
        
        padding: 25px;
        border-radius: 0 0 var(--border-radius-lg, 16px) var(--border-radius-lg, 16px);
        box-shadow: var(--card-shadow, 0 4px 12px rgba(0,0,0,0.08));
    }

    .donation-record-card {
        display: flex; 
        font-family: 'Kanit', sans-serif !important;
        align-items: flex-start; /* ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î */
        background-color: #fff;
        border: 1px solid #eee;
        border-radius: 10px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô */
        margin-bottom: 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á */
        padding: 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding */
        box-shadow: 0 2px 8px rgba(0,0,0,0.07); /* ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏≤ */
        transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
    }
    .donation-record-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 12px rgba(0,0,0,0.1);
    }

    .donation-case-image-container { /* (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà) Container ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÄ‡∏Ñ‡∏™ */
        flex-shrink: 0; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏ñ‡∏π‡∏Å‡∏ö‡∏µ‡∏ö */
        width: 100px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ */
        height: 100px;
        margin-right: 20px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
        border-radius: 8px; /* ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ */
        overflow: hidden; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏ô */
        background-color: #f0f0f0; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ */
    }
    .donation-case-image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* ‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ú‡∏¥‡∏î‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô */
    }

    .donation-details { /* (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà) Container ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ */
        flex-grow: 1; /* ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ */
    }

    .donation-details h5 {
        margin-top: 0;
        color: var(--secondary);
        font-size: 1.15em; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î */
        margin-bottom: 8px;
        font-family: 'Grandstander', cursive;
    }
    .donation-details p {
        font-size: 0.9em;
        margin-bottom: 6px;
        color: var(--text-light, #555);
        line-height: 1.5;
    }
     .donation-details p strong {
        color: var(--text-dark, #333);
    }

    .slip-preview-container { /* (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà) Container ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏¥‡∏õ */
        margin-top: 10px;
        text-align: left; /* ‡∏´‡∏£‡∏∑‡∏≠ center ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏™‡∏•‡∏¥‡∏õ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á */
    }
    .slip-preview {
        max-width: 120px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏•‡∏¥‡∏õ preview */
        max-height: 150px;
        border-radius: 6px;
        border: 1px solid #ddd;
        cursor: pointer; /* ‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏ç‡πà‡πÑ‡∏î‡πâ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) */
        transition: transform 0.2s ease;
    }
    .slip-preview:hover {
        transform: scale(1.05);
    }

    .no-donations {
        text-align: center;
        color: #777;
        margin-top: 30px;
        font-size: 1.1em;
        padding: 20px;
        background-color: #fffaf0;
        border-radius: var(--border-radius-md, 12px);
        border: 1px dashed var(--secondary);
    }
     .no-donations .paw-icon-empty {
        font-size: 2.5em;
        color: var(--light-orange, #f5a623);
        display: block;
        margin-bottom: 15px;
    }
</style>
{% endblock %}

{% block content %}
<div class="donations-page-container">
    <h1 class="page-section-header">
        <i class="fas fa-history paw-icon-header"></i>My Donations
    </h1>
    <div class="donations-content-box">
        {% if donations %}
            {% for record in donations %}
                <div class="donation-record-card">
                    {% if record.donation_case %}
                        <div class="donation-case-image-container">
                            {% if record.donation_case.image %} {# ‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å DonationCase.image #}
                                <img src="{{ record.donation_case.image.url }}" alt="{{ record.donation_case.title }}">
                            {% elif record.donation_case.pet and record.donation_case.pet.photo %} {# ‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å Pet.photo ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö DonationCase #}
                                <img src="{{ record.donation_case.pet.photo.url }}" alt="{{ record.donation_case.pet.name }}">
                            {% else %}
                                <img src="{% static 'myapp/images/default_case.png' %}" alt="No case image"> {# ‡∏£‡∏π‡∏õ Default ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏™ #}
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="donation-case-image-container"> {# ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÄ‡∏Ñ‡∏™‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á #}
                             <img src="{% static 'myapp/images/general_donation.png' %}" alt="General Donation"> {# ‡∏£‡∏π‡∏õ Default ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ #}
                        </div>
                    {% endif %}

                    <div class="donation-details">
                        <h5>
                            {% if record.donation_case %}
                                Donate to Case: {{ record.donation_case.title }} (No. {{ record.donation_case.case_id }})
                            {% else %}
                                General Donation
                            {% endif %}
                        </h5>
                        <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:</strong> {{ record.amount|floatformat:2 }} ‡∏ö‡∏≤‡∏ó</p>
                        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ:</strong> {{ record.donated_at|date:"d M Y, H:i" }}</p>
                        <p><strong>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> {{ record.payment_method }}</p>
                        {% if record.slip_image %}
                            <div class="slip-preview-container">
                                <p style="margin-bottom: 5px;"><strong>‡∏™‡∏•‡∏¥‡∏õ:</strong></p>
                                <img src="{{ record.slip_image.url }}" alt="Donation Slip" class="slip-preview">
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="no-donations">
                <span class="paw-icon-empty">üêæ</span>
                ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ
                <br><br>
                <a href="{% url 'donate' %}" class="button" style="background-color: var(--primary); color:white; padding: 10px 20px; border-radius: 20px; text-decoration:none; display:inline-block; margin-top:10px;">‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÄ‡∏•‡∏¢</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}